# DEV Environment: 테스트/포트폴리오용 최소 스펙
# 비용 최적화 버전 (2026-01-06)

# AWS 리전
aws_region = "ap-southeast-2"

# AWS 계정 ID (필수)
aws_account_id = "827913617839"

# 프로젝트 설정
project_name = "kyeol"
owner_prefix = "min"
environment  = "dev"

# VPC CIDR
vpc_cidr = "10.10.0.0/16"

# 가용영역 (2AZ - 비용 최적화)
azs = ["ap-southeast-2a", "ap-southeast-2c"]

# =============================================================================
# EKS 설정 (최소 스펙)
# =============================================================================
eks_cluster_version     = "1.32"  # 1.29 → 1.32 (Standard support until 2026-03)
eks_node_instance_types = ["t3.small"]  # t3.medium → t3.small
eks_node_desired_size   = 1             # 2 → 1
eks_node_min_size       = 1
eks_node_max_size       = 2

# =============================================================================
# RDS 설정 (최소 스펙)
# =============================================================================
rds_instance_class      = "db.t4g.micro"  # t3.small → t4g.micro
rds_multi_az            = false
rds_allocated_storage   = 20
rds_deletion_protection = false           # 테스트 환경: 삭제 가능

# Route53 Hosted Zone ID
hosted_zone_id = "ZXXXXXXXXXX"

# =============================================================================
# Cache (비활성화 - 비용 절감)
# =============================================================================
enable_cache = false

# =============================================================================
# VPC Endpoints (S3만 유지 - 비용 최적화)
# =============================================================================
enable_s3_endpoint   = true
enable_ecr_endpoints = false
enable_logs_endpoint = false
enable_sts_endpoint  = false

# =============================================================================
# S3/로깅 (최소화)
# =============================================================================
enable_phase3_s3       = false  # 테스트 환경: S3 버킷 불필요
logs_retention_days    = 7
enable_fluent_bit_irsa = false  # 로그 수집 비활성화

# =============================================================================
# CloudTrail/WAF/CloudFront (비활성화)
# =============================================================================
enable_cloudtrail = false

# =============================================================================
# VPC Peering 설정 (MGMT ↔ DEV)
# ArgoCD(MGMT)가 DEV EKS Private Endpoint로 접근하기 위해 활성화
# =============================================================================
enable_vpc_peering     = false  # VPC Peering 활성화 시 true
terraform_state_bucket = ""     # 예: "min-kyeol-terraform-state"

# =============================================================================
# EKS Endpoint 설정 (Private Endpoint 전환 시 변경)
# =============================================================================
# Private Endpoint만 사용 (보안 강화)
endpoint_private_access = true
endpoint_public_access  = true   # Private 전환 시 false로 변경

# Public Endpoint 접근 제한 (관리자 IP만 허용)
# endpoint_public_access = true
# public_access_cidrs    = ["YOUR_ADMIN_IP/32"]

# MGMT VPC CIDR (ArgoCD에서 EKS API 접근 허용)
mgmt_vpc_cidrs = ["10.40.0.0/16"]

# =============================================================================
# NAT Gateway (비용 주의: 월 $32+)
# DEV 환경: 테스트 시에만 활성화 권장
# =============================================================================
enable_nat_gateway = true   # 인터넷 접근 필요 시 true

# =============================================================================
# CloudWatch Logs (ISMS-P 기준 + 비용 최적화)
# DEV 환경: 비활성화 (비용 절감)
# PROD: ["audit"] 권장 (ISMS-P 감사 로그)
# =============================================================================
# enabled_cluster_log_types = []  # 기본값: 비활성화

# =============================================================================
# RDS Performance Insights (비용 주의: 7일 무료, 이후 과금)
# =============================================================================
# enable_performance_insights = false  # 기본값: 비활성화


